<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="jmpews,jmpews@gmail.com"><title>Linux命令备忘笔记 · jmpews</title><meta name="description" content="lsof1234567891011#查看所有已经建立的TCP连接(不解析port和host)lsof -i -sTCP:ESTABLISHED -P -n#查看某个进程打开文件lsof -p pid#查看TCP链接状态lsof -iTCP -sTCP:ESTABLISHED#查看某个端口的的连接ls"><meta name="keywords" content="py,go,pwn,reverse"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/images/logo@2x.png" style="width:127px;"><h3 title=""><a href="/">jmpews</a></h3><div class="description"><p>py &amp; go &amp; pwn &amp; reverse</p></div></div></div><ul class="social-links"><li><a href="https://twitter.com/jmpews"><i class="fa fa-twitter"></i></a></li><li><a href="http://weibo.com/winter1ife"><i class="fa fa-weibo"></i></a></li><li><a href="http://github.com/jmpews"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Theme by </span></a><a href="https://www.caicai.me"> CaiCai </a><span>&</span><a href="https://github.com/Ben02/hexo-theme-Anatole"> Ben</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/about">关于</a></li><li><a href="/archives">归档</a></li></div><div class="information"><div class="back_btn"><li><a onclick="window.history.go(-1)" class="fa fa-chevron-left"> </a></li></div><div class="avatar"><img src="/images/favicon.png"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Linux命令备忘笔记</a></h3></div><div class="post-content"><h2 id="lsof"><a href="#lsof" class="headerlink" title="lsof"></a>lsof</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">#查看所有已经建立的TCP连接(不解析port和host)</div><div class="line">lsof -i -sTCP:ESTABLISHED -P -n</div><div class="line"></div><div class="line">#查看某个进程打开文件</div><div class="line">lsof -p pid</div><div class="line"></div><div class="line">#查看TCP链接状态</div><div class="line">lsof -iTCP -sTCP:ESTABLISHED</div><div class="line"></div><div class="line">#查看某个端口的的连接</div><div class="line">lsof -i :22</div></pre></td></tr></table></figure>
<h2 id="find"><a href="#find" class="headerlink" title="find"></a>find</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">查找文件夹下包含某字符串的所有文件</div><div class="line">find ./ |xargs grep -ri &quot;str&quot;</div></pre></td></tr></table></figure>
<h2 id="ps"><a href="#ps" class="headerlink" title="ps"></a>ps</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">查看运行参数</div><div class="line">ps -ef |grep mysql</div></pre></td></tr></table></figure>
<h2 id="sudo"><a href="#sudo" class="headerlink" title="sudo"></a>sudo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">以某一个用户权限执行命令</div><div class="line">sudo -u apache ls</div></pre></td></tr></table></figure>
<h2 id="etc-group-amp-etc-passwd"><a href="#etc-group-amp-etc-passwd" class="headerlink" title="/etc/group &amp; /etc/passwd"></a>/etc/group &amp; /etc/passwd</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"># /etc/group 文件详解</div><div class="line"></div><div class="line">#第一字段:用户组名称</div><div class="line">#第二字段:用户组密码</div><div class="line">#第三字段:GID</div><div class="line">#第四字段:用户列表,每个用户之间用,号分割;本字段可以为空,如果字段为空表示用户组为GID的用户名</div><div class="line"></div><div class="line"># 用户组root,没有口令,包含用户root,me以及GID为0的用户(可以通过/etc/passwd查看)</div><div class="line">root:x:0:root,me</div></pre></td></tr></table></figure>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查找包含指定字符串的文件</div><div class="line">grep -n ` find -name &quot;*.go&quot;` -e &quot;ErrTooLong&quot;</div></pre></td></tr></table></figure>
<h2 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 返回文件行数</div><div class="line">wc -l filename</div></pre></td></tr></table></figure>
<h2 id="nc"><a href="#nc" class="headerlink" title="nc"></a>nc</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 监听本地8001端口，打印请求</div><div class="line">nc -l 8001</div><div class="line"></div><div class="line"># 发送字符串</div><div class="line">echo 4wcYUJFw0k0XLShlDzztnTBHiqxU3b3e | nc -vvn 127.0.0.1 30000</div></pre></td></tr></table></figure>
<h2 id="tcp"><a href="#tcp" class="headerlink" title="tcp"></a>tcp</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"># https://en.wikipedia.org/wiki/Transmission_Control_Protocol</div><div class="line"># https://zh.wikipedia.org/wiki/IPv4</div><div class="line"># 根据&apos;Data offset&apos;得到TCP-Length, 判断此后四个字节是否为&apos;GET &apos;</div><div class="line"># IPython</div><div class="line"># In [0]: [ hex(ord(x)) for x in &apos;GET &apos;]</div><div class="line"># Out[0]: [&apos;0x47&apos;, &apos;0x45&apos;, &apos;0x54&apos;, &apos;0x20&apos;]</div><div class="line">sudo tcpdump -X -s 0 -i en0 &apos;tcp[(tcp[12]&gt;&gt;2):4] = 0x47455420&apos;</div></pre></td></tr></table></figure>
<h2 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># L:显示层数 I:忽略文件</div><div class="line">tree -I &apos;*.pyc|__*__|node_modules|bower_components&apos; -L 3</div></pre></td></tr></table></figure>
<h2 id="ssh"><a href="#ssh" class="headerlink" title="ssh"></a>ssh</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">service ssh restart</div></pre></td></tr></table></figure>
<h2 id="find-1"><a href="#find-1" class="headerlink" title="find"></a>find</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 找出文件大小为1033文件</div><div class="line">find . -name &quot;*&quot; -size +1033c</div><div class="line"></div><div class="line"># 找到用户和群组归属的特定文件</div><div class="line">find / -group bandit6 -user bandit7 -size 33c</div></pre></td></tr></table></figure>
<h2 id="apt-cache"><a href="#apt-cache" class="headerlink" title="apt-cache"></a>apt-cache</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 查看依赖</div><div class="line">apt-cache depends &quot;build-essential&quot;</div></pre></td></tr></table></figure>
<h2 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 16 2 dec</div><div class="line">echo $((16#7f))</div></pre></td></tr></table></figure>
<h2 id="od"><a href="#od" class="headerlink" title="od"></a>od</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 查看二进制文件</div><div class="line"># -w8 每行显示8个字节</div><div class="line"># -t x 2以16进制显示，每一列包含2个字节</div><div class="line"># -A n 不显示偏移地址</div><div class="line"># -v 显示重复&apos;0&apos;行，否则以&apos;*&apos;替代</div><div class="line">cat main.o | od -w8 -t x2 -A n -v</div></pre></td></tr></table></figure>
<h2 id="xxd"><a href="#xxd" class="headerlink" title="xxd"></a>xxd</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"># 二进制查看文件</div><div class="line"># -c 12每一行包含12个字节</div><div class="line"># -g 4 每一列包含4个字节</div><div class="line">xxd -g 4  -c 12 main.o</div></pre></td></tr></table></figure>
<h2 id="printf"><a href="#printf" class="headerlink" title="printf"></a>printf</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 进制转换</div><div class="line">printf &apos;%d\n&apos; 0xd</div><div class="line">printf &apos;%x\n&apos; 11</div><div class="line"></div><div class="line"># 16进制运算</div><div class="line">printf &apos;%x\n&apos; $((0xdd-0x7f))</div></pre></td></tr></table></figure>
<h2 id="hexdump"><a href="#hexdump" class="headerlink" title="hexdump"></a>hexdump</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># -C 显示16进制和ASCII</div><div class="line">hexdump -C test.o</div></pre></td></tr></table></figure>
<h2 id="git"><a href="#git" class="headerlink" title="git"></a>git</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 显示某一个版本的文件</div><div class="line">git show HEAD^:db/tests/test_mysql.py</div></pre></td></tr></table></figure>
<h2 id="apt-get-install"><a href="#apt-get-install" class="headerlink" title="apt-get install"></a>apt-get install</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 安装指定版本</div><div class="line">sudo apt-get install postgresql-common=151.pgdg12.4+1</div></pre></td></tr></table></figure>
<h2 id="head"><a href="#head" class="headerlink" title="head"></a>head</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"># 显示前n行数据</div><div class="line">head -n file</div></pre></td></tr></table></figure>
<h2 id="od-1"><a href="#od-1" class="headerlink" title="od"></a>od</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"># 设置地址显示为16进制, 值显示为16进制</div><div class="line">od -A x -t x file</div><div class="line"></div><div class="line"># 将第一行数据以ASCII方式显示</div><div class="line">head -1 file | od -t c</div></pre></td></tr></table></figure>
</div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-12-21</span><i class="fa fa-tag"></i><a href="/categories/notes/" title="notes" class="tag">notes </a><a href="/tags/vpn/" title="vpn" class="tag">vpn </a><a href="/tags/Juniper/" title="Juniper" class="tag">Juniper </a></div></div></div></div><div class="share"><div class="evernote"><a href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank" class="fa fa-bookmark"></a></div><div class="weibo"><a href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));" class="fa fa-weibo"></a></div><div class="twitter"><a href="http://twitter.com/home?status=,http://jmpews.github.com/2016/12/21/notes/Linux命令备忘笔记/,jmpews,Linux命令备忘笔记,;" class="fa fa-twitter"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a role="navigation" href="/2016/12/14/pwn/PWN之ELF解析/" title="ELF解析" class="btn">上一篇</a></li><li class="next pagbuttons"><a role="navigation" href="/2016/12/21/pwn/PWN之技巧与笔记/" title="PWN技巧与笔记" class="btn">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>